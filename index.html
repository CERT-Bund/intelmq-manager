<!doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <title>IntelMQ Control Platform</title>
        
        <script type="text/javascript" src="./jquery/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="./bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="./vis.js/vis.js"></script>
        <script type="text/javascript" src="./js/main.js"></script>
        <script type="text/javascript" src="./js/runtime.js"></script>
        <script type="text/javascript" src="./js/startup.js"></script>
        <script type="text/javascript" src="./js/pipeline.js"></script>

        <link type="text/css" rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
        <link type="text/css" rel="stylesheet" href="./vis.js/vis.css">
        <link type="text/css" rel="stylesheet" href="./css/custom.css">
    </head>

    <body>
        <div id="graph-popUp" class="without-bot">
            <span id="graph-popUp-title">node</span> <br>
            <table id="graph-popUp-fields" style="margin:auto;">
                <tr>
                    <td>id</td><td><input id="node-id" value="new value"></td>
                </tr>
                <tr>
                    <td>name</td><td><input id="node-name" value=""></td>
                </tr>
                <tr>
                    <td>group</td><td><input id="node-group" value=""></td>
                </tr>
                <tr>
                    <td>module</td><td><input id="node-module" value=""></td>
                </tr>
                <tr>
                    <td>description</td><td><input id="node-description" value=""></td>
                </tr>
            </table>
            <input type="button" value="save" id="graph-popUp-save"></button>
            <input type="button" value="cancel" id="graph-popUp-cancel"></button>
        </div>
        <div class="container-fluid" style="z-index">
            <div id="page-header" class="page-header">
                <h3>IntelMQ Controller</h3>
                <ul class="nav nav-pills" role="tablist">
                    <li class="active"><a href="#graph-tab" role="tab" data-toggle="tab">Graph</a></li>
                    <li><a href="#runtime-tab" role="tab" data-toggle="tab">runtime.conf</a></li>
                    <li><a href="#pipeline-tab" role="tab" data-toggle="tab">pipeline.conf</a></li>
                    <li><a href="#startup-tab" role="tab" data-toggle="tab">startup.conf</a></li>
                </ul>
            </div>
            <div id="tab-content" class="tab-content">
                <div class="tab-pane active" id="graph-tab">
                    <div class="row" id="file-select">
                        <div class="col-xs-12">
                            <p>To start configuring your IntelMQ you have to at least have the 'available-bots.json' file available from you computer. This file is in every IntelMQ distribution in the root of the bots folder. Please use the file that came with your version of IntelMQ for compatibility reasons.</p>
                            <p>If you already have an implemented configuration you can copy the 3 configuration files to the machine you are using to run this interface and load it in the appropriate places bellow.
                            
                            <div class="form-group">
                                <label for="bots-file">available-bots.json</label>
                                <input id="bots-file" type="file" name="bots-file">
                            </div>
                            
                            <div class="form-group">
                                <label for="runtime-file">runtime.conf</label>
                                <input id="runtime-file" type="file" name="runtime-file">
                            </div>
                            
                            <div class="form-group">
                                <label for="startup-file">startup.conf</label>
                                <input id="startup-file" type="file" name="startup-file">
                            </div>
                            
                            <div class="form-group">
                                <label for="pipeline-file">pipeline.conf</label>
                                <input id="pipeline-file" type="file" name="pipeline-file">
                            </div>
                            
                            <input type="button" class="btn btn-primary" value="submit" onclick="verify_files(true)">
                            <input type="button" class="btn btn-primary" value="start from scratch" onclick="verify_files(false)">
                        </div>
                    </div>
                    <br />
                    <div class="row" id="graph-row">
                        <div class="col-xs-2" id="available-bots">
                            <h4>Available bots:</h4>
                        </div>
                        <div class="col-xs-10" id="mygraph">
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="runtime-tab">
                    <div class="row" id="runtime-generation">
                        <div class="col-sm-11" id="runtime-conf-content">
                        </div>
                        <div class="col-sm-1">
                            <a href="#" class="btn btn-primary" onclick="download_runtime(this, false)">
                                <span class="glyphicon glyphicon-floppy-disk">
                                </span>
                            </a>
                            <a href="#" class="btn btn-primary" onclick="download_runtime(this, true)">
                                Raw
                            </a>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="pipeline-tab">
                    <div class="row" id="pipeline-generation">
                        <div class="col-sm-11" id="pipeline-conf-content">
                        </div>
                        <div class="col-sm-1">
                            <a href="#" class="btn btn-primary" onclick="download_pipeline(this, false)">
                                <span class="glyphicon glyphicon-floppy-disk">
                                </span>
                            </a>
                            <a href="#" class="btn btn-primary" onclick="download_pipeline(this, true)">
                                Raw
                            </a>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="startup-tab">
                    <div class="row" id="startup-generation">
                        <div class="col-sm-11" id="startup-conf-content">
                        </div>
                        <div class="col-sm-1">
                            <a href="#" class="btn btn-primary" onclick="download_startup(this, false)">
                                <span class="glyphicon glyphicon-floppy-disk">
                                </span>
                            </a>
                            <a href="#" class="btn btn-primary" onclick="download_startup(this, true)">
                                Raw
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
